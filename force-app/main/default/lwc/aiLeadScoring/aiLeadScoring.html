<template>
    <div class="full-width-bg">
        <div class="lead-agent-container">
            <h1 class="title">ðŸ¤– AI Leads Agent</h1>


            <div class="form two-column-form">
                <div class="form-left">
                    <lightning-input name="leadName" label="Lead Name" value={leadName} onchange={handleInputChange}></lightning-input>
                    <lightning-input name="company" label="Company" value={company} onchange={handleInputChange}></lightning-input>
                    <lightning-input name="industry" label="Industry" value={industry} onchange={handleInputChange}></lightning-input>
                </div>
                <div class="form-right">
                    <lightning-textarea name="description" label="Lead Description" value={description} onchange={handleInputChange}></lightning-textarea>
                </div>
            </div>


            <lightning-button
                variant="brand"
                label="Generate Insights"
                title="Score Lead"
                onclick={handleScoreLead}
                class="btn-generate"
                disabled={loading}>
            </lightning-button>
            <div style="height:24px;width:100%"></div>

            <template if:true={loading}>
                <div class="spinner">
                    <lightning-spinner alternative-text="Analyzing..." size="medium"></lightning-spinner>
                </div>
            </template>

            <template if:true={aiResult}>
                <div class="result-box centered-result-box">
                    <h2 class="result-title">âš¡ Lead Insights</h2>

                    <template if:true={aiResult.score}>
                        <p class="score-line">
                            <strong>Score:</strong> {aiResult.score}/100
                            <span class="divider">â€¢</span>
                            <strong>Likelihood:</strong> {aiResult.likelihood}
                        </p>
                        <p class="recommendation-label"><strong>Recommendation:</strong></p>
                        <p class="recommendation-text">{aiResult.recommendation}</p>
                    </template>

                    <template if:true={aiResult.raw}>
                        <pre>{aiResult.raw}</pre>
                    </template>
                </div>
            </template>
        </div>
    </div>
</template>
